# 智能简历数据库系统 - 项目需求文档

## 1. 项目概述

### 1.1 项目背景

随着企业招聘流程的规范化与效率化，HR部门需要处理大量来自不同渠道的简历。手动从海量、格式各异的简历中提取关键信息，不仅耗时耗力，而且容易出错。本项目旨在开发一个基于网页的智能简历数据库系统，通过自动化解析技术，快速、准确地从上传的简历文件中提取结构化信息，并提供便捷的查阅、管理和导出功能，极大提升招聘前期的简历筛选与人才库管理效率。

### 1.2 项目目标

**核心目标**：实现一个用户友好、准确高效的在线简历信息提取与管理平台，并通过外部API接口和AI技术确保关键实体信息的准确性和标准化。

**关键指标**：
- 支持主简历格式（PDF文字、PDF图片、Word文档）的解析
- 对指定字段（姓名、性别、年龄、工龄等）的提取准确率 > 85%
- 对公司名称、学校名称的标准化识别率 > 90%
- 提供直观的数据展示界面和灵活的数据导出功能
- 系统响应快速，考虑到API调用，文件上传和解析平均耗时 < 60秒

### 1.3 技术栈

**后端技术**：
- Python 3.x
- Flask Web框架
- SQLAlchemy ORM
- SQLite 数据库

**前端技术**：
- HTML5
- CSS3
- JavaScript (原生，无框架依赖)

**核心依赖库**：
- PyPDF2 / PyMuPDF：PDF文件解析
- python-docx：Word文档解析
- PaddleOCR / EasyOCR：OCR光学字符识别（用于图片PDF）
- openpyxl：Excel文件导出
- reportlab：PDF报告生成

**AI与API集成**：
- OpenAI API / DeepSeek API / 阿里云Qwen API：AI辅助信息提取
- 企查查API：公司信息验证
- 学校名录API：学校信息验证
- 专业名录API：专业信息验证

## 2. 系统架构

### 2.1 系统模块

系统采用前后端分离的架构，主要包含以下模块：

1. **简历上传模块**：文件上传、解析、存储
2. **简历管理模块**：数据展示、搜索、筛选、编辑
3. **简历分析模块**：简历与岗位匹配度分析
4. **面试流程模块**：面试流程管理、评价填写
5. **数据统计模块**：数据统计、漏斗分析
6. **岗位目录模块**：岗位信息管理
7. **系统设置模块**：AI配置、系统参数

### 2.2 数据库设计

#### 2.2.1 简历表 (resumes)

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | Integer | 主键，自增 |
| file_name | String(255) | 文件名 |
| file_path | String(500) | 文件存储路径 |
| upload_time | DateTime | 上传时间 |
| name | String(100) | 姓名 |
| gender | String(10) | 性别 |
| birth_year | Integer | 出生年份 |
| earliest_work_year | Integer | 最早工作年份 |
| age | Integer | 年龄（计算字段） |
| age_from_resume | Integer | 从简历中提取的原始年龄 |
| phone | String(50) | 手机号 |
| email | String(100) | 邮箱 |
| highest_education | String(50) | 最高学历 |
| school | String(200) | 学校（标准化后） |
| school_original | String(200) | 原始学校名称 |
| school_code | String(100) | 学校代码 |
| school_match_status | String(50) | 学校匹配状态 |
| school_confidence | Float | 学校匹配置信度 |
| major | String(200) | 专业（标准化后） |
| major_original | String(200) | 原始专业名称 |
| major_code | String(100) | 专业代码 |
| major_match_status | String(50) | 专业匹配状态 |
| major_confidence | Float | 专业匹配置信度 |
| applied_position | String(200) | 应聘岗位 |
| work_experience | JSON | 工作经历（JSON格式） |
| parse_status | String(50) | 解析状态（pending/processing/success/failed） |
| parse_time | DateTime | 解析时间 |
| error_message | Text | 错误信息 |
| duplicate_status | String(50) | 重复状态 |
| duplicate_similarity | Float | 重复相似度（0-100） |
| duplicate_resume_id | Integer | 匹配到的重复简历ID |
| raw_text | Text | 原始文本内容 |

#### 2.2.2 岗位目录表 (positions)

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | Integer | 主键，自增 |
| position_name | String(200) | 岗位名称 |
| work_content | Text | 工作内容 |
| job_requirements | Text | 任职资格 |
| core_requirements | Text | 核心需求 |
| create_time | DateTime | 创建时间 |
| update_time | DateTime | 更新时间 |

#### 2.2.3 面试流程表 (interviews)

| 字段名 | 类型 | 说明 |
|--------|------|------|
| id | Integer | 主键，自增 |
| resume_id | Integer | 关联的简历ID |
| name | String(100) | 候选人姓名（冗余） |
| applied_position | String(200) | 应聘岗位（冗余） |
| identity_code | String(200) | 身份验证码（冗余，用于绑定和查找） |
| match_score | Integer | 匹配度分数 |
| match_level | String(50) | 匹配等级 |
| status | String(50) | 面试流程状态 |
| round1_interviewer | String(100) | 一面面试官 |
| round1_time | String(50) | 一面时间 |
| round1_result | String(50) | 一面结果 |
| round1_comment | Text | 一面评价 |
| round1_doc_path | String(500) | 一面文档路径 |
| round1_comment_token | String(100) | 一面评价填写token |
| round1_ai_result | Text | 一面AI分析结果 |
| round2_interviewer | String(100) | 二面面试官 |
| round2_time | String(50) | 二面时间 |
| round2_result | String(50) | 二面结果 |
| round2_comment | Text | 二面评价 |
| round2_doc_path | String(500) | 二面文档路径 |
| round2_comment_token | String(100) | 二面评价填写token |
| round2_ai_result | Text | 二面AI分析结果 |
| round3_enabled | Integer | 是否启用三面（0/1） |
| round3_interviewer | String(100) | 三面面试官 |
| round3_time | String(50) | 三面时间 |
| round3_result | String(50) | 三面结果 |
| round3_comment | Text | 三面评价 |
| round3_doc_path | String(500) | 三面文档路径 |
| round3_comment_token | String(100) | 三面评价填写token |
| round3_ai_result | Text | 三面AI分析结果 |
| offer_issued | Integer | 是否发放offer（0/1） |
| offer_date | String(50) | offer发放日期 |
| offer_department | String(200) | 拟入职架构 |
| offer_onboard_plan_date | String(50) | 拟入职日期 |
| onboard | Integer | 是否入职（0/1） |
| onboard_date | String(50) | 实际入职日期 |
| onboard_department | String(200) | 入职架构 |
| create_time | DateTime | 创建时间 |
| update_time | DateTime | 更新时间 |

## 3. 功能需求

### 3.1 模块一：简历上传与解析

#### 3.1.1 文件上传功能

**功能描述**：提供友好、高效的文件上传界面

**需求详情**：
- 支持拖拽上传和点击上传两种方式
- 支持格式：`.pdf`, `.doc`, `.docx`
- 支持单文件上传和批量文件上传
- 上传时显示实时进度条和状态提示
- 文件格式和大小校验（限制为10MB）
- 重复文件检测和提示

#### 3.1.2 智能解析功能

**功能描述**：自动解析简历内容并提取关键信息

**解析能力**：
- **文本PDF/Word**：直接提取文本内容进行分析
- **图片PDF**：集成OCR光学字符识别引擎，先将图片转换为文本，再进行分析

**解析字段**：
- 基本信息：姓名、性别、出生年份、年龄、手机号、邮箱
- 教育信息：最高学历、学校、专业（支持API标准化验证）
- 工作经历：公司名称、岗位名称、工作时间（支持API标准化验证）
- 其他信息：应聘岗位

**解析流程**：
1. 文件上传后自动触发解析
2. 提取文本内容（文本PDF/Word直接提取，图片PDF使用OCR）
3. AI优化文本提取（可选，如果配置了AI API）
4. 规则提取关键信息
5. API验证标准化（公司、学校、专业）
6. 查重检测
7. 保存解析结果

**解析状态**：
- `pending`：待处理
- `processing`：处理中
- `success`：解析成功
- `failed`：解析失败

### 3.2 模块二：简历数据管理

#### 3.2.1 数据列表展示

**功能描述**：提供清晰、直观的简历数据概览

**需求详情**：
- 以表格形式展示所有已成功解析的简历信息
- 显示核心字段：应聘岗位、身份验证码、姓名、性别、年龄、工龄、手机号、邮箱、最高学历、毕业学校、专业、查重状态、解析状态
- 支持按所有字段进行升序/降序排序
- 分页显示，支持自定义每页显示数量
- 支持批量选择操作

#### 3.2.2 搜索与筛选

**功能描述**：提供强大的搜索和筛选功能

**需求详情**：
- **文本搜索**：支持按姓名、学校、专业进行搜索
- **筛选功能**：
  - 性别筛选：全部/男/女
  - 学历筛选：全部/博士/硕士/本科/专科
- **实时搜索**：输入关键词后实时过滤结果

#### 3.2.3 详情查看与编辑

**功能描述**：提供详细的候选人信息展示和交互式修正功能

**需求详情**：
- 点击"查看/编辑"按钮，弹出详情模态框
- 详情页展示该候选人所有被解析出的完整信息
- 支持手动编辑所有字段
- 显示API验证状态（完全匹配/多项选择/匹配失败/未校验）
- 工作经历以结构化方式展示
- 支持保存修改

#### 3.2.4 数据导出

**功能描述**：支持单个和批量数据导出

**需求详情**：
- **单个导出**：在详情页面点击"下载此简历"按钮，导出为Excel格式
- **批量导出**：勾选多个简历后点击"导出选中"，导出为Excel格式
- **全部导出**：点击"导出全部"按钮，导出所有简历为Excel格式
- 导出文件包含所有解析字段

#### 3.2.5 数据删除

**功能描述**：支持单个和批量删除简历

**需求详情**：
- **单个删除**：在详情页面点击"删除"按钮
- **批量删除**：勾选多个简历后点击"删除选中"按钮
- 删除前需要确认
- 删除简历时同时删除关联的面试流程记录（可选）

### 3.3 模块三：简历分析

#### 3.3.1 简历匹配度分析

**功能描述**：分析简历与岗位的匹配度

**需求详情**：
- 选择简历和岗位后，系统自动进行匹配度分析
- 分析维度：
  - 教育背景匹配度（学历、学校、专业）
  - 工作经验匹配度（工作年限、工作内容、岗位相关性）
  - 技能匹配度（根据岗位要求）
- 生成匹配度分数（0-100）和匹配等级（高度匹配/中等匹配/低度匹配）
- 显示详细的匹配分析报告
- 支持下载分析报告为PDF格式

**匹配度阈值**：
- 高度匹配：>= 80分
- 中等匹配：>= 60分
- 低度匹配：< 60分

#### 3.3.2 AI辅助分析

**功能描述**：使用AI技术进行深度分析

**需求详情**：
- 支持配置AI API（OpenAI、DeepSeek、阿里云Qwen等）
- AI优化文本提取，提高解析准确率
- AI分析简历与岗位的匹配度
- AI生成面试建议和评价

### 3.4 模块四：面试流程管理

#### 3.4.1 面试流程创建

**功能描述**：从简历创建面试流程记录

**需求详情**：
- 在简历列表中点击"邀约面试"按钮，创建面试流程
- 自动关联简历信息（姓名、岗位、身份验证码等）
- 自动计算简历匹配度
- 生成身份验证码（姓名+手机号后4位）

#### 3.4.2 面试流程详情管理

**功能描述**：管理面试流程的详细信息

**需求详情**：
- **一面信息**：
  - 面试官、面试时间、面试结果（通过/未通过）
  - 面试评价（支持邀请填写链接）
  - 面试文档上传（录音逐字稿等）
  - AI分析结果
- **二面信息**：
  - 面试官、面试时间、面试结果
  - 面试评价（支持邀请填写链接）
  - 面试文档上传
  - AI分析结果
- **三面信息**（可选）：
  - 是否启用三面
  - 面试官、面试时间、面试结果
  - 面试评价（支持邀请填写链接）
  - 面试文档上传
  - AI分析结果
- **Offer与入职信息**：
  - 是否发放offer、offer发放日期、拟入职架构、拟入职日期
  - 是否入职、实际入职日期、入职架构
- **状态自动计算**：根据各轮面试结果自动计算最终状态

**状态流转**：
- 待面试 → 一面面试通过/未通过 → 二面面试通过/未通过 → 三面面试未通过/面试通过 → 已发offer → 已入职

#### 3.4.3 面试评价邀请填写

**功能描述**：生成邀请链接，供面试官填写评价

**需求详情**：
- 每个面试轮次提供"邀请填写"按钮
- 点击后生成唯一的填写链接（使用token）
- 链接包含面试官、面试时间、面试结果、面试评价等字段
- 面试官通过链接填写后，信息自动保存到系统
- 支持重复使用链接修改评价

#### 3.4.4 面试流程列表

**功能描述**：展示所有面试流程记录

**需求详情**：
- 以表格形式展示面试流程列表
- 显示字段：身份验证码、候选人姓名、应聘岗位、简历匹配度、当前状态、最后修改时间
- 支持按姓名、岗位搜索
- 支持按状态筛选
- 支持排序和分页
- 点击行可查看详情

#### 3.4.5 面试流程导出

**功能描述**：导出面试流程数据

**需求详情**：
- 支持单个面试流程导出
- 支持批量导出（勾选多个）
- 支持按条件导出（搜索/筛选后）
- 导出格式：Excel
- 导出字段：所有面试流程相关信息

### 3.5 模块五：数据统计

#### 3.5.1 数据统计功能

**功能描述**：提供数据统计和分析功能

**需求详情**：
- **时间筛选**：支持选择开始日期和结束日期
- **岗位筛选**：支持选择特定岗位或全部岗位
- **统计维度**：
  - 简历数：按简历上传时间统计
  - 到面数：按一面时间统计（有一面时间视为到面）
  - 通过数：按状态为"面试通过/已发offer/已入职"统计
  - Offer数：按Offer发放日期统计
  - 入职数：按实际入职日期统计

#### 3.5.2 数据展示

**功能描述**：按岗位分组展示统计数据

**需求详情**：
- **未选择岗位时**：按岗位分组显示，每个岗位显示一组统计卡片
- **选择岗位时**：只显示该岗位的统计卡片
- **总计显示**：按岗位分组时，底部显示总计数据
- **数据漏斗**：每个岗位提供"数据漏斗"按钮，点击后弹出模态框展示数据漏斗
  - 显示顺序：简历数 → 到面数 → 通过数 → Offer数 → 入职数
  - 显示数量和比例百分比（以简历数为100%）
  - 使用进度条可视化展示，色块宽度随比例变化

### 3.6 模块六：岗位目录管理

#### 3.6.1 岗位管理

**功能描述**：管理岗位信息

**需求详情**：
- **新增岗位**：添加新岗位信息
  - 岗位名称（必填）
  - 工作内容（必填）
  - 任职资格（必填）
  - 核心需求（必填）
- **编辑岗位**：修改已有岗位信息
- **删除岗位**：删除不需要的岗位
- **岗位列表**：以卡片形式展示所有岗位
  - 单个岗位横向显示：岗位名称在左侧，三个信息卡片（工作内容、任职资格、核心需求）在右侧横向排列
  - 各岗位纵向分布
  - 每个岗位显示创建时间和更新时间

#### 3.6.2 岗位信息展示

**功能描述**：岗位信息的展示布局

**需求详情**：
- 岗位名称在左侧，固定宽度
- 三个信息卡片（工作内容、任职资格、核心需求）在右侧横向排列
- 操作按钮（编辑、删除）位于横排最后
- 所有岗位的卡片高度保持一致
- 内容过长时支持滚动查看

### 3.7 模块七：系统设置

#### 3.7.1 AI配置

**功能描述**：配置AI辅助解析功能

**需求详情**：
- **AI开关**：启用/禁用AI辅助解析
- **AI模型选择**：支持多种AI模型
  - GPT-3.5 Turbo (OpenAI)
  - GPT-4 (OpenAI)
  - GPT-4 Turbo (OpenAI)
  - DeepSeek Chat
  - DeepSeek Coder
  - Qwen Turbo (阿里云)
  - Qwen Plus (阿里云)
- **API配置**：
  - API Key配置
  - API Base URL配置（可选）
- **连接测试**：测试AI API连接是否正常
- **配置保存**：保存配置后自动生效

#### 3.7.2 其他设置

**功能描述**：系统其他配置项

**需求详情**：
- OCR配置（启用/禁用、引擎选择、GPU加速）
- 外部API配置（企查查、学校名录、专业名录）

## 4. API接口文档

### 4.1 简历相关接口

#### 4.1.1 上传简历
- **接口**：`POST /api/upload`
- **参数**：`file` (文件，支持多文件)
- **返回**：上传结果和简历ID列表

#### 4.1.2 获取简历列表
- **接口**：`GET /api/resumes`
- **参数**：
  - `page`：页码
  - `per_page`：每页数量
  - `search`：搜索关键词
  - `gender`：性别筛选
  - `education`：学历筛选
  - `sort_by`：排序字段
  - `sort_order`：排序方向（asc/desc）
- **返回**：简历列表和分页信息

#### 4.1.3 获取简历详情
- **接口**：`GET /api/resumes/<resume_id>`
- **返回**：简历详细信息

#### 4.1.4 更新简历信息
- **接口**：`PUT /api/resumes/<resume_id>`
- **参数**：JSON格式的简历数据
- **返回**：更新结果

#### 4.1.5 删除简历
- **接口**：`DELETE /api/resumes/<resume_id>`
- **返回**：删除结果

#### 4.1.6 批量删除简历
- **接口**：`POST /api/resumes/batch_delete`
- **参数**：`{"resume_ids": [1, 2, 3]}`
- **返回**：删除结果

#### 4.1.7 导出单个简历
- **接口**：`GET /api/export/<resume_id>`
- **返回**：Excel文件

#### 4.1.8 批量导出简历
- **接口**：`POST /api/export/batch`
- **参数**：`{"resume_ids": [1, 2, 3]}`
- **返回**：Excel文件

#### 4.1.9 简历匹配度分析
- **接口**：`POST /api/resumes/<resume_id>/match-analysis`
- **参数**：`{"position_name": "岗位名称"}`
- **返回**：匹配度分析结果

#### 4.1.10 生成简历分析PDF
- **接口**：`POST /api/resumes/<resume_id>/analysis-pdf`
- **参数**：`{"position_name": "岗位名称"}`
- **返回**：PDF文件

### 4.2 面试流程相关接口

#### 4.2.1 获取面试流程列表
- **接口**：`GET /api/interviews`
- **参数**：
  - `search`：搜索关键词（姓名/岗位）
- **返回**：面试流程列表

#### 4.2.2 创建面试流程
- **接口**：`POST /api/interviews`
- **参数**：`{"resume_id": 1}`
- **返回**：创建的面试流程信息

#### 4.2.3 获取面试流程详情
- **接口**：`GET /api/interviews/<interview_id>`
- **返回**：面试流程详细信息

#### 4.2.4 更新面试流程
- **接口**：`PUT /api/interviews/<interview_id>`
- **参数**：JSON格式的面试流程数据
- **返回**：更新结果

#### 4.2.5 根据身份验证码获取面试流程
- **接口**：`GET /api/interviews/by-identity`
- **参数**：`identity_code`（身份验证码）
- **返回**：面试流程信息

#### 4.2.6 上传面试文档
- **接口**：`POST /api/interviews/<interview_id>/upload-doc`
- **参数**：`file`（文件）、`round`（轮次：1/2/3）
- **返回**：上传结果

#### 4.2.7 分析面试文档
- **接口**：`POST /api/interviews/<interview_id>/analyze-doc`
- **参数**：`{"round": 1}`
- **返回**：AI分析结果

#### 4.2.8 生成面试反馈报告PDF
- **接口**：`POST /api/interviews/<interview_id>/analysis-pdf`
- **参数**：`{"round": 1}`
- **返回**：PDF文件

#### 4.2.9 导出面试流程
- **接口**：`POST /api/interviews/export`
- **参数**：`{"interview_ids": [1, 2, 3]}` 或 `{"search": "关键词"}`
- **返回**：Excel文件

#### 4.2.10 生成面试评价填写链接
- **接口**：`POST /api/interviews/<interview_id>/comment-link/<round>`
- **参数**：`round`（轮次：1/2/3）
- **返回**：生成的token

#### 4.2.11 面试评价填写页面
- **接口**：`GET /interview-comment`
- **参数**：`token`（填写token）
- **返回**：HTML页面

#### 4.2.12 提交面试评价
- **接口**：`POST /api/interview-comment/submit`
- **参数**：
  - `token`：填写token
  - `interviewer`：面试官
  - `time`：面试时间
  - `result`：面试结果
  - `comment`：面试评价
- **返回**：提交结果

### 4.3 数据统计接口

#### 4.3.1 获取统计数据
- **接口**：`GET /api/statistics`
- **参数**：
  - `start_date`：开始日期（YYYY-MM-DD）
  - `end_date`：结束日期（YYYY-MM-DD）
  - `position`：岗位名称（可选）
- **返回**：
  - 如果指定岗位：返回该岗位的统计数据
  - 如果未指定岗位：返回按岗位分组的统计数据 + 总计

### 4.4 岗位目录接口

#### 4.4.1 获取岗位列表
- **接口**：`GET /api/positions`
- **返回**：岗位列表

#### 4.4.2 创建岗位
- **接口**：`POST /api/positions`
- **参数**：
  - `position_name`：岗位名称
  - `work_content`：工作内容
  - `job_requirements`：任职资格
  - `core_requirements`：核心需求
- **返回**：创建的岗位信息

#### 4.4.3 获取岗位详情
- **接口**：`GET /api/positions/<position_id>`
- **返回**：岗位详细信息

#### 4.4.4 更新岗位
- **接口**：`PUT /api/positions/<position_id>`
- **参数**：JSON格式的岗位数据
- **返回**：更新结果

#### 4.4.5 删除岗位
- **接口**：`DELETE /api/positions/<position_id>`
- **返回**：删除结果

### 4.5 AI配置接口

#### 4.5.1 获取AI配置
- **接口**：`GET /api/ai/config`
- **返回**：当前AI配置

#### 4.5.2 保存AI配置
- **接口**：`POST /api/ai/config`
- **参数**：
  - `ai_enabled`：是否启用AI
  - `ai_model`：AI模型
  - `ai_api_key`：API密钥
  - `ai_api_base`：API Base URL
- **返回**：保存结果

#### 4.5.3 测试AI连接
- **接口**：`POST /api/ai/test`
- **参数**：AI配置信息
- **返回**：测试结果

## 5. 用户界面设计

### 5.1 整体布局

**布局结构**：
- 左侧固定侧边栏：导航菜单
- 右侧主内容区：各功能模块内容

**侧边栏导航**：
- 简历上传
- 简历分析
- 面试流程
- 数据统计
- 岗位目录
- 设置

### 5.2 各模块界面

#### 5.2.1 简历上传模块

**界面元素**：
- 文件上传区域（拖拽/点击上传）
- 上传进度条
- 搜索和筛选区域
- 简历列表表格
- 分页控件

**表格列**：
- 复选框（批量选择）
- 应聘岗位（18%宽度，最小180px）
- 身份验证码
- 姓名
- 性别
- 年龄
- 工龄
- 手机号
- 邮箱
- 学历
- 毕业学校
- 专业
- 查重状态
- 解析状态
- 操作（120px宽度，包含"查看/编辑"和"邀约面试"按钮）

#### 5.2.2 简历分析模块

**界面元素**：
- 左侧：简历选择列表（搜索框 + 简历列表）
- 右侧：分析结果展示区域
  - 岗位选择下拉框
  - 匹配度分析结果
  - 详细分析报告
  - 下载PDF按钮

#### 5.2.3 面试流程模块

**界面元素**：
- 搜索和筛选区域
- 面试流程列表表格
- 面试流程详情模态框
  - 基本信息（身份验证码、候选人姓名、应聘岗位、当前状态）
  - 一面信息（面试官、时间、结果、评价、文档上传、AI分析）
  - 二面信息
  - 三面信息（可选）
  - Offer与入职信息
  - 保存按钮

#### 5.2.4 数据统计模块

**界面元素**：
- 筛选区域（开始日期、结束日期、岗位选择、统计按钮）
- 统计结果展示区域
  - 按岗位分组显示（未选择岗位时）
  - 单个岗位显示（选择岗位时）
  - 每个岗位包含：
    - 岗位名称（左侧，固定宽度）
    - 数据漏斗按钮（岗位名称下方）
    - 统计卡片（右侧，横向排列）：
      - 简历数
      - 到面数
      - 通过数
      - Offer数
      - 入职数
  - 总计数据（按岗位分组时显示）

**数据漏斗模态框**：
- 弹出式展示，不改变现有布局
- 显示顺序：简历数 → 到面数 → 通过数 → Offer数 → 入职数
- 每个阶段显示：
  - 阶段名称（左侧）
  - 进度条（中间，宽度随比例变化）
  - 数量（进度条内左侧）
  - 百分比（进度条内右侧）

#### 5.2.5 岗位目录模块

**界面元素**：
- 新增岗位按钮
- 岗位列表（纵向排列）
  - 每个岗位横向显示：
    - 岗位名称（左侧，固定宽度）
    - 三个信息卡片（右侧，横向排列）：
      - 工作内容
      - 任职资格
      - 核心需求
    - 操作按钮（编辑、删除，位于横排最后）
    - 创建时间和更新时间（底部）

#### 5.2.6 系统设置模块

**界面元素**：
- AI配置区域
  - AI开关
  - AI模型选择
  - API Key输入
  - API Base URL输入
  - 测试连接按钮
  - 保存配置按钮

## 6. 非功能性需求

### 6.1 性能需求

- 文件上传响应时间 < 2秒
- 简历解析平均耗时 < 60秒（包含API调用）
- 页面加载时间 < 3秒
- 数据查询响应时间 < 1秒

### 6.2 安全需求

- 文件上传大小限制：10MB
- 文件类型验证：仅允许PDF、Word格式
- 防止SQL注入：使用参数化查询
- 防止XSS攻击：输出转义
- API密钥安全存储：使用环境变量或配置文件

### 6.3 可用性需求

- 支持主流浏览器（Chrome、Firefox、Edge、Safari）
- 响应式设计，适配不同屏幕尺寸
- 友好的错误提示和用户引导
- 操作反馈及时（加载状态、成功/失败提示）

### 6.4 可维护性需求

- 代码结构清晰，模块化设计
- 完善的注释和文档
- 数据库迁移支持
- 日志记录功能

## 7. 数据流程

### 7.1 简历上传与解析流程

```
用户上传文件
    ↓
文件格式和大小验证
    ↓
保存文件到服务器
    ↓
创建简历记录（状态：pending）
    ↓
异步解析任务启动
    ↓
提取文本内容（文本PDF/Word直接提取，图片PDF使用OCR）
    ↓
AI优化文本（可选，如果配置了AI）
    ↓
规则提取关键信息
    ↓
API验证标准化（公司、学校、专业）
    ↓
查重检测
    ↓
更新简历记录（状态：success/failed）
    ↓
前端自动刷新显示结果
```

### 7.2 面试流程管理流程

```
从简历创建面试流程
    ↓
自动关联简历信息
    ↓
生成身份验证码
    ↓
计算简历匹配度
    ↓
填写面试信息（各轮次）
    ↓
生成邀请填写链接（可选）
    ↓
面试官填写评价（通过链接）
    ↓
自动更新面试流程状态
    ↓
填写Offer和入职信息（如果通过）
```

### 7.3 数据统计流程

```
选择时间范围和岗位
    ↓
点击统计按钮
    ↓
后端计算统计数据
    ↓
按岗位分组返回数据
    ↓
前端展示统计卡片
    ↓
点击数据漏斗按钮
    ↓
弹出数据漏斗模态框
    ↓
展示各阶段数量和比例
```

## 8. 异常处理

### 8.1 文件上传异常

- 文件格式不支持：提示用户正确的文件格式
- 文件过大：提示文件大小限制
- 上传失败：显示错误信息，允许重试

### 8.2 解析异常

- 文本提取失败：标记为解析失败，允许手动录入
- OCR识别失败：提示用户，允许重新上传
- API调用失败：标记为未校验，允许手动修正
- 解析超时：标记为处理中，后台继续处理

### 8.3 数据操作异常

- 数据不存在：提示错误信息
- 删除失败：显示失败原因
- 保存失败：显示错误信息，保留用户输入

## 9. 部署说明

### 9.1 环境要求

- Python 3.7+
- 操作系统：Windows / Linux / macOS
- 内存：建议 4GB+
- 磁盘空间：根据文件存储需求

### 9.2 安装步骤

1. 安装Python依赖：`pip install -r requirements.txt`
2. 安装OCR依赖（可选）：`pip install paddleocr` 或 `pip install easyocr`
3. 配置环境变量或编辑 `config.py` 设置API密钥
4. 运行系统：`python app.py`
5. 访问系统：`http://localhost:5000`

### 9.3 目录结构

```
简历上传/
├── app.py                 # Flask主应用
├── config.py              # 配置文件
├── models.py              # 数据模型
├── requirements.txt       # Python依赖
├── README.md             # 说明文档
├── utils/                # 工具函数
│   ├── file_parser.py    # 文件解析
│   ├── info_extractor.py # 信息提取
│   ├── api_integration.py # API集成
│   ├── ai_extractor.py   # AI提取器
│   ├── duplicate_checker.py # 查重检测
│   ├── export.py         # Excel导出
│   └── export_pdf.py     # PDF导出
├── templates/            # HTML模板
│   ├── index.html        # 主页面
│   ├── error.html        # 错误页面
│   └── interview_comment.html # 面试评价填写页面
├── static/               # 静态资源
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── main.js
│   └── images/
│       └── logo.png
├── uploads/              # 上传文件存储
├── exports/              # 导出文件存储
└── database.db           # SQLite数据库（自动生成）
```

## 10. 版本历史

### 版本 2e9d396（当前版本）

**主要功能**：
- ✅ 简历上传与解析（支持PDF、Word，OCR识别）
- ✅ 简历数据管理（搜索、筛选、编辑、删除、导出）
- ✅ 简历分析（匹配度分析、AI辅助）
- ✅ 面试流程管理（多轮面试、评价填写、文档上传）
- ✅ 数据统计（按岗位分组、数据漏斗）
- ✅ 岗位目录管理
- ✅ 系统设置（AI配置）

**技术特性**：
- AI辅助文本优化和信息提取
- 外部API集成（公司、学校、专业验证）
- 查重检测
- 面试评价邀请填写功能
- 数据漏斗可视化
- PDF报告生成

## 11. 后续规划

### 11.1 功能增强

- [ ] 支持更多文件格式（图片、TXT等）
- [ ] 批量导入简历（ZIP压缩包）
- [ ] 高级数据分析报表
- [ ] 邮件通知功能
- [ ] 移动端适配优化

### 11.2 性能优化

- [ ] 数据库索引优化
- [ ] 缓存机制
- [ ] 异步任务队列
- [ ] CDN加速

### 11.3 安全增强

- [ ] 用户认证和授权
- [ ] 数据加密
- [ ] 操作日志记录
- [ ] 备份和恢复功能

---

**文档版本**：1.0  
**最后更新**：2024年  
**维护者**：开发团队



